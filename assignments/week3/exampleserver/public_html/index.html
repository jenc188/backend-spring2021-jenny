<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to my Website</title>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>
<body>
    <h1>Welcome to my Website!</h1>
    <p><a href="/funnywebsite">Click here to go to my funny page.</a></p>
    <p>Feeling lucky today? Guess a number</p>

    <form>
        <label for="number">Type a number between 1 and 10:</label>
        <input type="number" id="number" />
        <button>Send the Number!</button>
    </form>

    <p id="results"></p>

    <script>

         // let this variable control the server URL
        const baseUrl = "http://localhost:3000";

        // New way of jQuery waiting for HTML.
        $(function () {

            // Listen for a click on the buttons...
            $("button").click(function (event) {

                //... stop the normal action of the button...
                event.preventDefault();

                // Grab the number from the input box.
                let number = $("#number").val();

                // convert the string to a number
                number = parseInt(number);

                //check if it could be converted or not.
                if (Number.isNaN(number)) {
                    $("#results").text("Sorry but that is not a valid number! Please try again.");

                    return;
                }

                //Build object to send to the back-end.
                let objectToSend = {
                    message: "hello",
                    numberGuess: number,
                    someObject: {
                        someValue: 10
                    },
                    thisShouldBeTrue: true
                };

                console.log(objectToSend);
                // jQuery POST Request.Arguments: location, date, callback function
                $.post(baseUrl + "/submitNumber", objectToSend, function (response) {
                    
                    console.log(response);

                    // Grab the data from the response object sent by the back-end and place it in the paragraph element in our HTML.
                    $("#results").text(response.message);
                    
                });
            });

        });

    </script>
</body>
</html>